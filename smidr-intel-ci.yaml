name: ci-intel
description: "CI integration: Intel BSP with networking and Python layers"
yocto_series: kirkstone
base:
  provider: intel
  machine: intel-corei7-64
  distro: poky
  version: "6.0.0"
layers:
  - name: poky
    git: https://git.yoctoproject.org/poky
    branch: kirkstone
  - name: meta-openembedded
    git: https://github.com/openembedded/meta-openembedded
    branch: kirkstone
    # Will include meta-oe, meta-python, meta-networking
  - name: meta-intel
    git: https://git.yoctoproject.org/meta-intel
    branch: kirkstone
build:
  image: core-image-minimal
  machine: intel-corei7-64
  bb_number_threads: 8
  parallel_make: 8

  # Add Python and networking support
  extra_packages:
    - "python3"
    - "python3-pip"
artifacts:
  - "*.wic"
  - "*.iso"
  - "*.tar.bz2"
  - "*.manifest"
directories:
  layers: ${YOCTO_LAYERS_DIR:-~/.smidr/layers}
  downloads: ${YOCTO_DL_DIR:-~/.smidr/downloads}
  sstate: ${YOCTO_SSTATE_DIR:-~/.smidr/sstate}
  tmp: ${YOCTO_TMP_DIR:-~/.smidr/tmp}
  deploy: ${YOCTO_DEPLOY_DIR:-~/.smidr/deploy}
container:
  base_image: crops/yocto:ubuntu-22.04-builder
advanced:
  build_timeout: 240
  sstate_mirrors: ${YOCTO_SSTATE_MIRRORS:-file://.* file:///home/builder/sstate-cache/PATH}
packages:
  classes: package_ipk
features:
  extra_image_features: ["debug-tweaks", "package-management"]
