# Smidr Build Configuration
  # Generated by 'smidr init my-smidr-project'

  name: my-smidr-project
  description: "Custom embedded Linux image"
  yocto_series: kirkstone
  # Base system configuration
  base:
    provider: toradex
    machine: verdin-imx8mp
    distro: tdx-xwayland
    version: "6.0.0"



  # Layer configuration
  layers:
    - name: poky
      path: poky
      source: "https://git.yoctoproject.org/poky"
    - name: meta
      path: poky/meta
      source: "https://git.yoctoproject.org/poky"
    - name: meta-poky
      path: poky/meta-poky
      source: "https://git.yoctoproject.org/poky"
    - name: meta-yocto-bsp
      path: poky/meta-yocto-bsp
      source: "https://git.yoctoproject.org/poky"
    - name: meta-freescale
      path: meta-freescale
      source: "https://git.yoctoproject.org/meta-freescale"
    - name: meta-freescale-3rdparty
      path: meta-freescale-3rdparty
      source: "https://git.yoctoproject.org/meta-freescale-3rdparty"
    - name: meta-openembedded
      path: meta-openembedded
      source: "https://git.openembedded.org/meta-openembedded"
    - name: meta-oe
      path: meta-openembedded/meta-oe
      source: "https://git.openembedded.org/meta-openembedded"
    - name: meta-python
      path: meta-openembedded/meta-python
      source: "https://git.openembedded.org/meta-openembedded"
    - name: meta-networking
      path: meta-openembedded/meta-networking
      source: "https://git.openembedded.org/meta-openembedded"
    - name: meta-multimedia
      path: meta-openembedded/meta-multimedia
      source: "https://git.openembedded.org/meta-openembedded"
    - name: meta-toradex-bsp-common
      path: meta-toradex-bsp-common
      source: "https://git.toradex.com/meta-toradex-bsp-common.git"
    - name: meta-toradex-nxp
      path: meta-toradex-nxp
      source: "https://git.toradex.com/meta-toradex-nxp.git"

    # Custom layers (your application code)
    # - name: meta-mycompany
    #   path: meta-mycompany
    #   source: ../meta-mycompany
    #
    # - name: meta-myapp
    #   path: meta-myapp

  # Build configuration - use the minimal to start and always start with qemux86-64
  build:
    image: core-image-minimal
    machine: qemux86-64

    # Extra packages to include
    extra_packages:
      - python3
      - nodejs
      - vim

    # Build options
    parallel_make: 8
    bb_number_threads: 8

  # Output artifacts to extract
  artifacts:
    - "*.wic"           # Disk images
    - "*.tar.bz2"       # Root filesystem archives
    - "*-sdk-*.sh"      # SDK installers

  # Directory configuration (all default to ~/.smidr/*)
  directories:
    downloads: ~/.smidr/downloads
    layers: ~/.smidr/layers
    sstate: ~/.smidr/sstate-cache
    tmp: ~/.smidr/tmp
    build: ~/.smidr/build
    deploy: ~/.smidr/deploy
    source: ~/.smidr/sources

  # Container configuration
  container:
    # Base image for builds (using official Yocto project image)
    base_image: "crops/yocto:ubuntu-22.04-base"

    # Resource limits
    memory: "8g"
    cpu_count: 8

  # Cache configuration
  cache:
    # Shared cache locations (defaults to ~/.smidr)
    downloads: ~/.smidr/downloads
    sstate: ~/.smidr/sstate-cache

    # Cache retention (days)
    retention: 30
