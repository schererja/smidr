#!/bin/sh
# Small helper to aid integration test debugging
# Usage: smidr-debug [paths...]

echo "=== smidr-debug ==="
echo "Date: $(date -u)"
echo "User: $(id)"
echo "Mounted filesystems:"
cat /proc/mounts || true

echo "--- Provided args ---"
for p in "$@"; do
  echo "Path: $p"
  ls -la "$p" || true
done

echo "--- Default checks ---"
for d in /home/builder/downloads /home/builder/work /home/builder/sstate-cache /home/builder/layers; do
  echo "Listing $d"
  ls -la "$d" || true
done

# Print environment useful for Yocto tools
echo "--- ENV ---"
env | grep -E 'YOCTO|PATH|HOME' || true

exit 0
